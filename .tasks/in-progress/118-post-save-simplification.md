# [FE] ê²Œì‹œê¸€ ì €ì¥ ë¡œì§ ë‹¨ìˆœí™” - UI/UX ë³€ê²½

- **ì´ìŠˆ ë²ˆí˜¸**: #118
- **ì´ìŠˆ ë§í¬**: https://github.com/leehydev/pagelet-app/issues/118
- **ìƒì„±ì¼**: 2026-01-28
- **ë‹´ë‹¹**: Developer
- **ë¸Œëœì¹˜**: `feature/118-post-save-simplification`
- **ê´€ë ¨ íƒœìŠ¤í¬**: ë°±ì—”ë“œ íƒœìŠ¤í¬ (pagelet-api) - ì„ í–‰ í•„ìš”

## ëª©ì 

ê²Œì‹œê¸€ ì €ì¥ ë¡œì§ ë‹¨ìˆœí™”ì— ë”°ë¥¸ í”„ë¡ íŠ¸ì—”ë“œ UI/UXë¥¼ ë³€ê²½í•©ë‹ˆë‹¤.

### í•µì‹¬ ë³€ê²½ì‚¬í•­

| êµ¬ë¶„        | AS-IS               | TO-BE                       |
| ----------- | ------------------- | --------------------------- |
| ìƒˆ ê¸€ ì‘ì„±  | ìë™ì €ì¥            | ìˆ˜ë™ ì €ì¥ (ì €ì¥/ë“±ë¡ ë²„íŠ¼)  |
| ê¸€ ìˆ˜ì •     | ìë™ì €ì¥ + ë“œë˜í”„íŠ¸ | ë“±ë¡ ë²„íŠ¼ë§Œ (ì„ì‹œì €ì¥ ì—†ìŒ) |
| ì €ì¥ëœ ê¸€   | Post ì—°ê²° Draft     | ë…ë¦½ì ì¸ Draft ëª©ë¡         |
| í˜ì´ì§€ ì´íƒˆ | -                   | ì»¨íŒì°½ í‘œì‹œ                 |

## ìš”êµ¬ì‚¬í•­

### 1. ì—ë””í„° UI ë³€ê²½

#### ìƒˆ ê¸€ ì‘ì„± ëª¨ë“œ

- [ ] [ì €ì¥] ë²„íŠ¼ - Draft ìƒì„±/ì—…ë°ì´íŠ¸
- [ ] [ë“±ë¡] ë²„íŠ¼ - Postë¡œ ë°œí–‰
- [ ] [ì €ì¥ëœ ê¸€ ë¶ˆëŸ¬ì˜¤ê¸°] ë²„íŠ¼ - Draft ëª©ë¡ ëª¨ë‹¬ ì—´ê¸°
- [ ] ìë™ì €ì¥ ê¸°ëŠ¥ ì œê±°

#### ê¸€ ìˆ˜ì • ëª¨ë“œ

- [ ] [ë“±ë¡] ë²„íŠ¼ë§Œ í‘œì‹œ (ì €ì¥ ë²„íŠ¼ ì—†ìŒ)
- [ ] ì €ì¥ëœ ê¸€ ë¶ˆëŸ¬ì˜¤ê¸° ë²„íŠ¼ ì—†ìŒ
- [ ] ìë™ì €ì¥ ê¸°ëŠ¥ ì œê±°

### 2. ì €ì¥ëœ ê¸€ ë¶ˆëŸ¬ì˜¤ê¸° ëª¨ë‹¬

- [ ] Draft ëª©ë¡ í‘œì‹œ (ì œëª©, ì €ì¥ì¼ì‹œ, ë¯¸ë¦¬ë³´ê¸°)
- [ ] Draft ì„ íƒ ì‹œ ì—ë””í„°ì— ë¡œë“œ
- [ ] Draft ì‚­ì œ ê¸°ëŠ¥
- [ ] ì‘ì„± ì¤‘ì¸ ë‚´ìš©ì´ ìˆì„ ë•Œ:
  - "ì‘ì„±ì¤‘ì¸ ë‚´ìš©ì„ ì„ì‹œì €ì¥í•˜ê³  ì„ íƒí•œ ë¬¸ì„œë¥¼ ë¶ˆëŸ¬ì˜¤ì‹œê² ìŠµë‹ˆê¹Œ?"
  - [ì„ì‹œì €ì¥ í›„ ë¶ˆëŸ¬ì˜¤ê¸°] / [ì·¨ì†Œ]

### 3. í˜ì´ì§€ ì´íƒˆ ì²˜ë¦¬

#### ìƒˆ ê¸€ ì‘ì„± / Draft í¸ì§‘ ì‹œ

- [ ] beforeunload ì´ë²¤íŠ¸ í•¸ë“¤ë§
- [ ] ë¼ìš°í„° ì´íƒˆ ê°ì§€ (Next.js router events)
- [ ] ì»¨íŒ ëª¨ë‹¬: "ì‘ì„±ì¤‘ì¸ ë‚´ìš©ì´ ìˆìŠµë‹ˆë‹¤"
  - [ì„ì‹œì €ì¥] - Draft ì €ì¥ í›„ ì´íƒˆ
  - [ì €ì¥í•˜ì§€ ì•Šê³  ë‚˜ê°€ê¸°] - ê·¸ëƒ¥ ì´íƒˆ
  - [ì·¨ì†Œ] - ì´íƒˆ ì·¨ì†Œ

#### ê¸€ ìˆ˜ì • ì‹œ

- [ ] beforeunload ì´ë²¤íŠ¸ í•¸ë“¤ë§
- [ ] ì»¨íŒ ëª¨ë‹¬: "ì €ì¥í•˜ì§€ ì•Šì€ ë³€ê²½ì‚¬í•­ì´ ìˆìŠµë‹ˆë‹¤"
  - [ë‚˜ê°€ê¸°] - ë³€ê²½ì‚¬í•­ ë²„ë¦¬ê³  ì´íƒˆ
  - [ì·¨ì†Œ] - ì´íƒˆ ì·¨ì†Œ

### 4. API ì—°ë™ ë³€ê²½

#### ì œê±°í•  API í˜¸ì¶œ

- [ ] `PUT /admin/.../posts/:id/draft` (ìë™ì €ì¥)
- [ ] `GET /admin/.../posts/:id/draft` (ë“œë˜í”„íŠ¸ ì¡°íšŒ)
- [ ] `DELETE /admin/.../posts/:id/draft` (ë³€ê²½ ì·¨ì†Œ)
- [ ] `POST /admin/.../posts/:id/publish` (ë°œí–‰)
- [ ] `POST /admin/.../posts/:id/republish` (ì¬ë°œí–‰)
- [ ] `POST /admin/.../posts/:id/unpublish` (ë¹„ê³µê°œ)

#### ìƒˆë¡œ ì—°ë™í•  API

- [ ] `GET /admin/v2/drafts` - Draft ëª©ë¡
- [ ] `POST /admin/v2/drafts` - Draft ìƒì„±
- [ ] `PUT /admin/v2/drafts/:id` - Draft ìˆ˜ì •
- [ ] `DELETE /admin/v2/drafts/:id` - Draft ì‚­ì œ
- [ ] `POST /admin/v2/drafts/:id/publish` - Draft â†’ Post ë“±ë¡
- [ ] `PUT /admin/v2/posts/:id` - Post ìˆ˜ì • (ê¸°ì¡´ ìœ ì§€)

### 5. ì—ëŸ¬ ì²˜ë¦¬

- [ ] Draft â†’ Post ë“±ë¡ ì‹œ slug ì¤‘ë³µ ì—ëŸ¬ í•¸ë“¤ë§
  - `SLUG_ALREADY_EXISTS` ì—ëŸ¬ ìˆ˜ì‹  ì‹œ í† ìŠ¤íŠ¸/ì•Œë¦¼ í‘œì‹œ
  - "ì´ë¯¸ ì‚¬ìš©ì¤‘ì¸ URLì…ë‹ˆë‹¤. ë‹¤ë¥¸ URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”."
  - slug ì…ë ¥ í•„ë“œë¡œ í¬ì»¤ìŠ¤ ì´ë™

### 6. ìƒíƒœ ê´€ë¦¬ ë³€ê²½

- [ ] ìë™ì €ì¥ ë¡œì§ ì œê±°
- [ ] Draft ID ìƒíƒœ ì¶”ê°€ (ë¶ˆëŸ¬ì˜¨ Draft ì¶”ì ìš©)
- [ ] "ë³€ê²½ì‚¬í•­ ìˆìŒ" í”Œë˜ê·¸ ì¶”ê°€ (ì´íƒˆ ê°ì§€ìš©)
- [ ] ì—ë””í„° ëª¨ë“œ êµ¬ë¶„: `'create' | 'edit-draft' | 'edit-post'`

### 7. ê¸°ì¡´ ì½”ë“œ ì •ë¦¬

- [ ] v1 API í˜¸ì¶œ ì½”ë“œ ì œê±°
- [ ] ìë™ì €ì¥ í›…/ìœ í‹¸ë¦¬í‹° ì œê±°
- [ ] ê¸°ì¡´ Draft ê´€ë ¨ ìƒíƒœ ì •ë¦¬

## ì‘ì—… ë²”ìœ„

### ë³€ê²½í•  íŒŒì¼ (ì˜ˆìƒ)

```
src/
â”œâ”€â”€ features/post/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ PostEditor.tsx         # ì—ë””í„° UI ë³€ê²½
â”‚   â”‚   â”œâ”€â”€ EditorToolbar.tsx      # ë²„íŠ¼ ë³€ê²½
â”‚   â”‚   â”œâ”€â”€ DraftListModal.tsx     # ì‹ ê·œ: Draft ëª©ë¡ ëª¨ë‹¬
â”‚   â”‚   â””â”€â”€ LeaveConfirmModal.tsx  # ì‹ ê·œ: ì´íƒˆ ì»¨íŒ ëª¨ë‹¬
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ useAutoSave.ts         # ì œê±°
â”‚   â”‚   â”œâ”€â”€ useDraft.ts            # ì‹ ê·œ ë˜ëŠ” ì „ë©´ ìˆ˜ì •
â”‚   â”‚   â”œâ”€â”€ useLeaveConfirm.ts     # ì‹ ê·œ: ì´íƒˆ ê°ì§€ í›…
â”‚   â”‚   â””â”€â”€ usePostEditor.ts       # ìˆ˜ì •: ëª¨ë“œë³„ ë¡œì§
â”‚   â””â”€â”€ api/
â”‚       â”œâ”€â”€ draftApi.ts            # ì‹ ê·œ: Draft API
â”‚       â””â”€â”€ postApi.ts             # ìˆ˜ì •: deprecated ì œê±°
â”œâ”€â”€ app/
â”‚   â””â”€â”€ admin/[siteSlug]/posts/
â”‚       â”œâ”€â”€ new/page.tsx           # ìˆ˜ì •: ìƒˆ ê¸€ ëª¨ë“œ
â”‚       â””â”€â”€ [postId]/edit/page.tsx # ìˆ˜ì •: ìˆ˜ì • ëª¨ë“œ
```

### ì œì™¸ ë²”ìœ„

- ë°±ì—”ë“œ API ë³€ê²½ (ë³„ë„ íƒœìŠ¤í¬)
- ê³µê°œ í˜ì´ì§€ ë³€ê²½ (ë³€ê²½ ì—†ìŒ)

## ê¸°ìˆ ì  ìƒì„¸

### ì—ë””í„° ëª¨ë“œë³„ ë™ì‘

| ëª¨ë“œ       | ì§„ì… ì¡°ê±´              | ì €ì¥ ë²„íŠ¼      | ë“±ë¡ ë²„íŠ¼     | ë¶ˆëŸ¬ì˜¤ê¸° | ì´íƒˆ ì²˜ë¦¬     |
| ---------- | ---------------------- | -------------- | ------------- | -------- | ------------- |
| create     | `/posts/new` ì§„ì…      | O (Draft ìƒì„±) | O (Post ìƒì„±) | O        | ì„ì‹œì €ì¥ ì œì•ˆ |
| edit-draft | Draft ë¶ˆëŸ¬ì˜¤ê¸°         | O (Draft ìˆ˜ì •) | O (Post ìƒì„±) | X        | ì„ì‹œì €ì¥ ì œì•ˆ |
| edit-post  | `/posts/:id/edit` ì§„ì… | X              | O (Post ìˆ˜ì •) | X        | ì»¨íŒë§Œ        |

### ì´íƒˆ ê°ì§€ í›… ì˜ˆì‹œ

```typescript
export function useLeaveConfirm(options: {
  hasChanges: boolean;
  mode: 'create' | 'edit-draft' | 'edit-post';
  onSaveDraft?: () => Promise<void>;
}) {
  // beforeunload
  useEffect(() => {
    const handler = (e: BeforeUnloadEvent) => {
      if (options.hasChanges) {
        e.preventDefault();
        e.returnValue = '';
      }
    };
    window.addEventListener('beforeunload', handler);
    return () => window.removeEventListener('beforeunload', handler);
  }, [options.hasChanges]);

  // Next.js router
  useEffect(() => {
    const handleRouteChange = () => {
      if (options.hasChanges) {
        // ëª¨ë‹¬ í‘œì‹œ ë¡œì§
      }
    };
    // router.events.on('routeChangeStart', handleRouteChange);
  }, []);
}
```

### Draft ëª©ë¡ ëª¨ë‹¬ UI

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì €ì¥ëœ ê¸€ ë¶ˆëŸ¬ì˜¤ê¸°              âœ•  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸ“„ ì œëª© ì—†ìŒ                â”‚ ğŸ—‘ â”‚
â”‚  â”‚    2026-01-28 14:30 ì €ì¥    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸ“„ ë§ˆì¼€íŒ… ì „ëµ 2026         â”‚ ğŸ—‘ â”‚
â”‚  â”‚    2026-01-27 09:15 ì €ì¥    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                      â”‚
â”‚  ì €ì¥ëœ ê¸€ì´ 14ì¼ í›„ ìë™ ì‚­ì œë©ë‹ˆë‹¤ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ì™„ë£Œ ê¸°ì¤€ (Definition of Done)

- [ ] ì—ë””í„° UI ë³€ê²½ ì™„ë£Œ
- [ ] Draft ëª©ë¡ ëª¨ë‹¬ êµ¬í˜„ ì™„ë£Œ
- [ ] ì´íƒˆ ê°ì§€ ë° ì»¨íŒ êµ¬í˜„ ì™„ë£Œ
- [ ] ì‹ ê·œ API ì—°ë™ ì™„ë£Œ
- [ ] ê¸°ì¡´ ì½”ë“œ ì •ë¦¬ ì™„ë£Œ
- [ ] ë¹Œë“œ ì„±ê³µ (`npm run build`)
- [ ] ì£¼ìš” í”Œë¡œìš° ìˆ˜ë™ í…ŒìŠ¤íŠ¸ ì™„ë£Œ

## ì˜ì¡´ì„±

- **ì„ í–‰**: ë°±ì—”ë“œ API ì™„ë£Œ í•„ìš” (pagelet-api íƒœìŠ¤í¬)

## ì°¸ê³  ìë£Œ

- í˜„ì¬ ì—ë””í„°: `src/features/post/components/`
- Next.js App Router ì´íƒˆ ê°ì§€: [ê³µì‹ ë¬¸ì„œ](https://nextjs.org/docs/app/api-reference/functions/use-router)

---

## ì§„í–‰ ë¡œê·¸

### 2026-01-28

- íƒœìŠ¤í¬ íŒŒì¼ ìƒì„±
- ìš”êµ¬ì‚¬í•­ ì •ë¦¬ ì™„ë£Œ
